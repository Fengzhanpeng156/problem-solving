# 页表

### **为什么一级页表不是4MB？**

在32位系统中，**单级页表**需要 **4MB** 来映射整个4GB地址空间（因为每页4KB，共1M页，每个页表项4字节 → 1M × 4B = 4MB）。

但**多级页表（如二级页表）**的设计是为了**按需分配内存**，避免单级页表的浪费。

### ** 一级页表为什么是4KB？**

在二级页表设计中：

1. **一级页表（页目录）**只负责划分整个4GB地址空间为 **1024个4MB的大块**（因为 4GB ÷ 1024 = 4MB/块）。
2. 每个一级页表项（4字节）指向一个**二级页表**，而一级页表本身只有 **1024项**（因为 4GB ÷ 4MB = 1024块）。
3. **一级页表总大小** = 1024项 × 4字节 = **4KB**（而不是4MB）。

### **为什么不是4MB？**

- **单级页表**（4MB）：必须完整存储所有1M页的映射，即使程序只用1MB内存，页表仍占4MB。

- 二级页表

  （4KB + 按需分配的二级页表）：

  - 一级页表固定4KB（1024项）。
  - **二级页表仅在实际使用的内存块中分配**（例如程序只用1MB → 可能只需1个二级页表，占用1KB）。
  - **总占用** ≈ 4KB（一级） + 少量二级页表，远小于单级的4MB。